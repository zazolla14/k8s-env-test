eksctl utils associate-iam-oidc-provider --region=ap-southeast-3 --cluster=akachat-testing --approve

eksctl create iamserviceaccount \
    --cluster=akachat-testing \
    --namespace=kube-system \
    --name=aws-load-balancer-controller \
    --attach-policy-arn=arn:aws:iam::207834821696:policy/AWSLoadBalancerControllerIAMPolicy \
    --override-existing-serviceaccounts \
    --region ap-southeast-3 \
    --approve


helm install aws-load-balancer-controller eks/aws-load-balancer-controller \
-n kube-system \
--set clusterName=akachat-testing \
--set serviceAccount.create=true \
--set serviceAccount.name=aws-load-balancer-controller \
--set region=ap-southeast-3 \
--set vpcId=vpc-0b93aac0799d008a6 \
--version 1.13.4

kubectl annotate serviceaccount -n kube-system aws-load-balancer-controller eks.amazonaws.com/role-arn=arn:aws:iam::207834821696:role/AmazonEKSLoadBalancerControllerRole


helm uninstall aws-load-balancer-controller eks/aws-load-balancer-controller -n kube-system
